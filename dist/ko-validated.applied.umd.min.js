!function(e,r){"function"==typeof define&&define.amd?define(["knockout"],r):"object"==typeof exports?module.exports=r(require("knockout")):e.ko=r(e.ko)}(this,function(e){var r,n={}.hasOwnProperty;return r=function(e){var r,t,o,i;return e.validated={},r=function(){function e(e,r,n,t,o){this.name=e,this.message=r,this.target=n,null!=t&&(this.dispose=t),null!=o&&(this.isDisposed=o)}return e.prototype.dispose=function(){},e.prototype.isDisposed=function(){return!0},e}(),t=0,i=function(){return++t},e.extenders.fallible=function(t,o){var l,s,u,f,a,c;return o===!1?("function"==typeof t._disposeFallible&&t._disposeFallible(),t):e.extenders.fallible.isFallible(t)?t:(s=e.observable({}),f={},u={}.hasOwnProperty,c=function(e,r){var n,t;"string"==typeof e&&({}.hasOwnProperty(f,e)?(t=e,e=f[e],delete f[t]):e=void 0),null!=e&&(n=s(),u.call(n,e)&&(delete n[e],r!==!1&&s.valueHasMutated()))},l=function(e){return u.call(s(),e)},a=function(e,n,o,u){var a,d;return null!=n?(d=i(),a=new r(o,n,t,function(){return c(null!=o?o:d)},function(){return!l(d)}),"string"==typeof o&&({}.hasOwnProperty.call(f,o)&&c(f[o],!1),f[o]=d),e[d]=n,u!==!1&&s.valueHasMutated()):(a=new r(o,n,t),c(o,u)),a},t.errors=e.pureComputed({read:function(){var e,r,t,o,i;o=[],e=function(r){var n,t,i;if(null!=r)if("function"==typeof r)r=r(),e(r);else if(Array.isArray(r))for(n=0,t=r.length;t>n;n++)i=r[n],e(i);else"string"==typeof r||"object"==typeof r?o.push(r):"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")},i=s();for(r in i)n.call(i,r)&&(t=i[r],e(t));return o},write:function(e){t.errors.set(e)}}),t.errors.add=function(e,r){return 1===arguments.length&&(r=e,e=void 0),a(s(),r,e,!0)},t.errors.set=function(e,r){var n,t;return 1===arguments.length&&(r=e,e=void 0),t={},f={},n=a(t,r,e,!1),s(t),n},t.errors.get=function(e){var r,t,o,i,l;if(t=void 0,r=function(e){var n,o,i;if(null==e)return!1;if("function"==typeof e){if(e=e(),r(e))return!0}else if(Array.isArray(e)){for(n=0,o=e.length;o>n;n++)if(i=e[n],r(i))return!0}else{if("string"==typeof e||"object"==typeof e)return t=e,!0;"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")}return!1},"string"==typeof e){if({}.hasOwnProperty.call(f,e)&&r(s()[f[e]]))return t}else{l=s();for(o in l)if(n.call(l,o)&&(i=l[o],r(i)))return t}},t.errors.has=function(e){return null!=t.errors.get(e)},t.errors.remove=function(e){"string"==typeof e&&c(e)},t.errors.clear=function(){f={},s({})},t.error=e.pureComputed({read:t.errors.get,write:t.errors.set}),t.hasError=e.pureComputed({read:t.errors.has}),t._disposeFallible=function(){s({}),delete t.error,delete t.errors,delete t.hasError,delete t._disposeFallible},t)},e.extenders.fallible.isFallible=function(e){return null!=e.errors&&null!=e.error},o=function(){var r,t;return t=function(){var r,n,t,o,i;if(r=e.computed(function(){}),null!=Object.getOwnPropertySymbols)for(o=Object.getOwnPropertySymbols(r),n=0,t=o.length;t>n;n++)if(i=o[n],"Symbol(_state)"===String(i))return i;return{}.hasOwnProperty.call(r,"_state")?"_state":void 0}(),r=function(){var r,o,i,l,s;i=e.observable(),r=e.computed({read:function(){return i()}}),l=r[t];for(o in l)if(n.call(l,o)&&(s=l[o],null!=s&&"object"==typeof s))return o}(),function(n){return e.isComputed(n)?n[t][r]:{}}}(),e.extenders.fallibleRead=function(r,t){var i,l,s;return e.isComputed(r)?(r.extend({fallible:!0}),t===!1?void("function"==typeof r._disposeFallibleRead&&r._disposeFallibleRead()):(s=function(r,t){var i,l,u;u=o(t);for(l in u)n.call(u,l)&&(i=u[l],i=i._target,e.extenders.fallible.isFallible(i)&&-1===r.indexOf(i.errors)&&r.push(i.errors),e.isComputed(i)&&s(r,i));return r},l=function(){try{return s([],r)}finally{}},i=r.errors.add(l),r._disposeFallibleRead=function(){null!=i&&(i.dispose(),i=void 0)},r)):r},e},r(e),e});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtvLXZhbGlkYXRlZC5hcHBsaWVkLnVtZC5qcyIsImtvLXZhbGlkYXRlZC5hcHBsaWVkLmNvZmZlZSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwia28iLCJ0aGlzIiwiYXBwbHlLb3YiLCJoYXNQcm9wIiwiaGFzT3duUHJvcGVydHkiLCJEaXNwb3NhYmxlIiwiX2lkQ291bnRlciIsImdldERlcGVuZGVuY2llcyIsImdldFVuaXF1ZUlkIiwidmFsaWRhdGVkIiwibmFtZTEiLCJtZXNzYWdlMSIsInRhcmdldDEiLCJkaXNwb3NlIiwiaXNEaXNwb3NlZCIsIm5hbWUiLCJtZXNzYWdlIiwidGFyZ2V0IiwicHJvdG90eXBlIiwiZXh0ZW5kZXJzIiwiZmFsbGlibGUiLCJvcHRpb25zIiwiX2Vycm9yRXhpc3RzIiwiX2Vycm9ycyIsIl9oYXNPd25Qcm9wIiwiX25hbWVkIiwiX3JlZ2lzdGVyRXJyb3IiLCJfcmVtb3ZlRXJyb3IiLCJfZGlzcG9zZUZhbGxpYmxlIiwiaXNGYWxsaWJsZSIsIm9ic2VydmFibGUiLCJpZCIsInRyaWdnZXIiLCJlcnJvcnMiLCJjYWxsIiwidmFsdWVIYXNNdXRhdGVkIiwiZGlzcG9zYWJsZSIsInB1cmVDb21wdXRlZCIsInJlYWQiLCJjb2xsZWN0TWVzc2FnZXMiLCJtZXNzYWdlcyIsInJlZiIsImkiLCJsZW4iLCJzdWJNZXNzYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwicHVzaCIsImNvbnNvbGUiLCJhc3NlcnQiLCJ3cml0ZSIsInNldCIsImFkZCIsImFyZ3VtZW50cyIsImdldCIsImZpbmRNZXNzYWdlIiwiZmlyc3RNZXNzYWdlIiwiaGFzIiwicmVtb3ZlIiwiY2xlYXIiLCJlcnJvciIsImhhc0Vycm9yIiwiZGVwS2V5Iiwic3ltU3RhdGUiLCJjIiwic3ltYm9sIiwiY29tcHV0ZWQiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJTdHJpbmciLCJrZXkiLCJvIiwidmFsIiwiaXNDb21wdXRlZCIsImZhbGxpYmxlUmVhZCIsImZpbmRJbm5lciIsImV4dGVuZCIsIl9kaXNwb3NlRmFsbGlibGVSZWFkIiwib3V0cHV0IiwiZGVwZW5kZW5jeSIsIl90YXJnZXQiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiQ0FBRSxTQUFTQSxFQUFNQyxHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFDekNELFFBQVEsWUFBYUQsR0FDTyxnQkFBWkcsU0FDaEJDLE9BQU9ELFFBQVVILEVBQVFLLFFBQVEsYUFFakNOLEVBQUtPLEdBQUtOLEVBQVFELEVBQUtPLEtBRXpCQyxLQUFNLFNBQVNELEdBQ2pCLEdBQUlFLEdDVEpDLEtBQUFDLGNEaVZBLE9DalZBRixHQUFXLFNBQUNGLEdBQ1YsR0FBQUssR0FBQUMsRUFBQUMsRUFBQUMsQ0FtU0EsT0FuU0FSLEdBQUdTLGFBR0dKLEVBQUEsV0FDUyxRQUFBQSxHQUFDSyxFQUFPQyxFQUFVQyxFQUFTQyxFQUFTQyxHQUFuQ2IsS0FBQ2MsS0FBREwsRUFBT1QsS0FBQ2UsUUFBREwsRUFBVVYsS0FBQ2dCLE9BQURMLEVBQzFCLE1BQUFDLElBQ0RaLEtBQUNZLFFBQVVBLEdBQ1YsTUFBQUMsSUFDRGIsS0FBQ2EsV0FBYUEsR0R5QmxCLE1BTkFULEdBQVdhLFVDakJYTCxRQUFTLGFEbUJUUixFQUFXYSxVQ2hCWEosV0FBWSxXQUNWLE9BQU8sR0RtQkZULEtDakJUQyxFQUFhLEVBQ2JFLEVBQWMsV0RxQlosUUNwQkVGLEdBRUpOLEVBQUdtQixVQUFVQyxTQUFXLFNBQUNILEVBQVFJLEdBRS9CLEdBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLENBQUEsT0FBR04sTUFBVyxHRHFCMkIsa0JBQTVCSixHQUFPVyxrQkNwQmxCWCxFQUFPVyxtQkFDQVgsR0FHTmpCLEVBQUdtQixVQUFVQyxTQUFTUyxXQUFXWixHQUMzQkEsR0FHVE0sRUFBVXZCLEVBQUc4QixlQUNiTCxLQUdBRCxLQUFtQnBCLGVBR25C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QSxFQUFXQyxRQUNyQmpGLEVBQUdtQixVQUFVQyxTQUFTUyxXQUFXbUQsSUFDTSxLQUFyQ0QsRUFBT0csUUFBUUYsRUFBVy9DLFNBQzNCOEMsRUFBTy9CLEtBQUtnQyxFQUFXL0MsUUFFeEJqQyxFQUFHMEUsV0FBV00sSUFDZkosRUFBVUcsRUFBUUMsR0FFdEIsT0FBT0QsSUFFVDlDLEVBQVMsV0FDUCxJQUdFLE1BQU8yQyxNQUFjM0QsR0FIdkIsV0FPRm1CLEVBQWFuQixFQUFPZ0IsT0FBT29CLElBQUlwQixHQUUvQmhCLEVBQU82RCxxQkFBdUIsV0FDekIsTUFBQTFDLElBQ0RBLEVBQVd2QixVQUNYdUIsRUFBYSxTQUdWbkIsSUFwQ0VBLEdBdUNKakIsR0FFVEUsRUFBU0YsR0QyQ0ZBIiwiZmlsZSI6ImtvLXZhbGlkYXRlZC5hcHBsaWVkLnVtZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICBkZWZpbmUoWydrbm9ja291dCddLCBmYWN0b3J5KTtcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2tub2Nrb3V0JykpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByb290LmtvID0gZmFjdG9yeShyb290LmtvKTtcclxuICB9XHJcbn0odGhpcywgZnVuY3Rpb24oa28pIHtcclxudmFyIGFwcGx5S292LFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbmFwcGx5S292ID0gZnVuY3Rpb24oa28pIHtcbiAgdmFyIERpc3Bvc2FibGUsIF9pZENvdW50ZXIsIGdldERlcGVuZGVuY2llcywgZ2V0VW5pcXVlSWQ7XG4gIGtvLnZhbGlkYXRlZCA9IHt9O1xuICBEaXNwb3NhYmxlID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIERpc3Bvc2FibGUobmFtZTEsIG1lc3NhZ2UxLCB0YXJnZXQxLCBkaXNwb3NlLCBpc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lMTtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UxO1xuICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQxO1xuICAgICAgaWYgKGRpc3Bvc2UgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmRpc3Bvc2UgPSBkaXNwb3NlO1xuICAgICAgfVxuICAgICAgaWYgKGlzRGlzcG9zZWQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBpc0Rpc3Bvc2VkO1xuICAgICAgfVxuICAgIH1cblxuICAgIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuaXNEaXNwb3NlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXNwb3NhYmxlO1xuXG4gIH0pKCk7XG4gIF9pZENvdW50ZXIgPSAwO1xuICBnZXRVbmlxdWVJZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiArK19pZENvdW50ZXI7XG4gIH07XG4gIGtvLmV4dGVuZGVycy5mYWxsaWJsZSA9IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHZhciBfZXJyb3JFeGlzdHMsIF9lcnJvcnMsIF9oYXNPd25Qcm9wLCBfbmFtZWQsIF9yZWdpc3RlckVycm9yLCBfcmVtb3ZlRXJyb3I7XG4gICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIGlmIChrby5leHRlbmRlcnMuZmFsbGlibGUuaXNGYWxsaWJsZSh0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBfZXJyb3JzID0ga28ub2JzZXJ2YWJsZSh7fSk7XG4gICAgX25hbWVkID0ge307XG4gICAgX2hhc093blByb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcbiAgICBfcmVtb3ZlRXJyb3IgPSBmdW5jdGlvbihpZCwgdHJpZ2dlcikge1xuICAgICAgdmFyIGVycm9ycywgbmFtZTtcbiAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eShfbmFtZWQsIGlkKSkge1xuICAgICAgICAgIG5hbWUgPSBpZDtcbiAgICAgICAgICBpZCA9IF9uYW1lZFtpZF07XG4gICAgICAgICAgZGVsZXRlIF9uYW1lZFtuYW1lXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZCA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgZXJyb3JzID0gX2Vycm9ycygpO1xuICAgICAgICBpZiAoX2hhc093blByb3AuY2FsbChlcnJvcnMsIGlkKSkge1xuICAgICAgICAgIGRlbGV0ZSBlcnJvcnNbaWRdO1xuICAgICAgICAgIGlmICh0cmlnZ2VyICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgX2Vycm9ycy52YWx1ZUhhc011dGF0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIF9lcnJvckV4aXN0cyA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICByZXR1cm4gX2hhc093blByb3AuY2FsbChfZXJyb3JzKCksIGlkKTtcbiAgICB9O1xuICAgIF9yZWdpc3RlckVycm9yID0gZnVuY3Rpb24oZXJyb3JzLCBtZXNzYWdlLCBuYW1lLCB0cmlnZ2VyKSB7XG4gICAgICB2YXIgZGlzcG9zYWJsZSwgaWQ7XG4gICAgICBpZiAobWVzc2FnZSAhPSBudWxsKSB7XG4gICAgICAgIGlkID0gZ2V0VW5pcXVlSWQoKTtcbiAgICAgICAgZGlzcG9zYWJsZSA9IG5ldyBEaXNwb3NhYmxlKG5hbWUsIG1lc3NhZ2UsIHRhcmdldCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF9yZW1vdmVFcnJvcihuYW1lICE9IG51bGwgPyBuYW1lIDogaWQpO1xuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gIV9lcnJvckV4aXN0cyhpZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoX25hbWVkLCBuYW1lKSkge1xuICAgICAgICAgICAgX3JlbW92ZUVycm9yKF9uYW1lZFtuYW1lXSwgZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfbmFtZWRbbmFtZV0gPSBpZDtcbiAgICAgICAgfVxuICAgICAgICBlcnJvcnNbaWRdID0gbWVzc2FnZTtcbiAgICAgICAgaWYgKHRyaWdnZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgX2Vycm9ycy52YWx1ZUhhc011dGF0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcG9zYWJsZSA9IG5ldyBEaXNwb3NhYmxlKG5hbWUsIG1lc3NhZ2UsIHRhcmdldCk7XG4gICAgICAgIF9yZW1vdmVFcnJvcihuYW1lLCB0cmlnZ2VyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkaXNwb3NhYmxlO1xuICAgIH07XG4gICAgdGFyZ2V0LmVycm9ycyA9IGtvLnB1cmVDb21wdXRlZCh7XG4gICAgICByZWFkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNvbGxlY3RNZXNzYWdlcywgaWQsIG1lc3NhZ2UsIG1lc3NhZ2VzLCByZWY7XG4gICAgICAgIG1lc3NhZ2VzID0gW107XG4gICAgICAgIGNvbGxlY3RNZXNzYWdlcyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICB2YXIgaSwgbGVuLCBzdWJNZXNzYWdlO1xuICAgICAgICAgIGlmIChtZXNzYWdlID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSgpO1xuICAgICAgICAgICAgY29sbGVjdE1lc3NhZ2VzKG1lc3NhZ2UpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXNzYWdlKSkge1xuICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbWVzc2FnZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICBzdWJNZXNzYWdlID0gbWVzc2FnZVtpXTtcbiAgICAgICAgICAgICAgY29sbGVjdE1lc3NhZ2VzKHN1Yk1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmFzc2VydCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoZmFsc2UsICdpbnZhbGlkIGVycm9yIG1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVmID0gX2Vycm9ycygpO1xuICAgICAgICBmb3IgKGlkIGluIHJlZikge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwgaWQpKSBjb250aW51ZTtcbiAgICAgICAgICBtZXNzYWdlID0gcmVmW2lkXTtcbiAgICAgICAgICBjb2xsZWN0TWVzc2FnZXMobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgICAgfSxcbiAgICAgIHdyaXRlOiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgICAgICB0YXJnZXQuZXJyb3JzLnNldChtZXNzYWdlcyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGFyZ2V0LmVycm9ycy5hZGQgPSBmdW5jdGlvbihuYW1lLCBtZXNzYWdlKSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBtZXNzYWdlID0gbmFtZTtcbiAgICAgICAgbmFtZSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVnaXN0ZXJFcnJvcihfZXJyb3JzKCksIG1lc3NhZ2UsIG5hbWUsIHRydWUpO1xuICAgIH07XG4gICAgdGFyZ2V0LmVycm9ycy5zZXQgPSBmdW5jdGlvbihuYW1lLCBtZXNzYWdlKSB7XG4gICAgICB2YXIgZGlzcG9zYWJsZSwgZXJyb3JzO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbWVzc2FnZSA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICBlcnJvcnMgPSB7fTtcbiAgICAgIF9uYW1lZCA9IHt9O1xuICAgICAgZGlzcG9zYWJsZSA9IF9yZWdpc3RlckVycm9yKGVycm9ycywgbWVzc2FnZSwgbmFtZSwgZmFsc2UpO1xuICAgICAgX2Vycm9ycyhlcnJvcnMpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGU7XG4gICAgfTtcbiAgICB0YXJnZXQuZXJyb3JzLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmaW5kTWVzc2FnZSwgZmlyc3RNZXNzYWdlLCBpZCwgbWVzc2FnZSwgcmVmO1xuICAgICAgZmlyc3RNZXNzYWdlID0gdm9pZCAwO1xuICAgICAgZmluZE1lc3NhZ2UgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHZhciBpLCBsZW4sIHN1Yk1lc3NhZ2U7XG4gICAgICAgIGlmIChtZXNzYWdlID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSgpO1xuICAgICAgICAgIGlmIChmaW5kTWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZSkpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBtZXNzYWdlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBzdWJNZXNzYWdlID0gbWVzc2FnZVtpXTtcbiAgICAgICAgICAgIGlmIChmaW5kTWVzc2FnZShzdWJNZXNzYWdlKSkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGZpcnN0TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5hc3NlcnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICBjb25zb2xlLmFzc2VydChmYWxzZSwgJ2ludmFsaWQgZXJyb3IgbWVzc2FnZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9O1xuICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChfbmFtZWQsIG5hbWUpKSB7XG4gICAgICAgICAgaWYgKGZpbmRNZXNzYWdlKF9lcnJvcnMoKVtfbmFtZWRbbmFtZV1dKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0TWVzc2FnZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZiA9IF9lcnJvcnMoKTtcbiAgICAgICAgZm9yIChpZCBpbiByZWYpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGlkKSkgY29udGludWU7XG4gICAgICAgICAgbWVzc2FnZSA9IHJlZltpZF07XG4gICAgICAgICAgaWYgKGZpbmRNZXNzYWdlKG1lc3NhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmlyc3RNZXNzYWdlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9O1xuICAgIHRhcmdldC5lcnJvcnMuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRhcmdldC5lcnJvcnMuZ2V0KG5hbWUpICE9IG51bGw7XG4gICAgfTtcbiAgICB0YXJnZXQuZXJyb3JzLnJlbW92ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgX3JlbW92ZUVycm9yKG5hbWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGFyZ2V0LmVycm9ycy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgX25hbWVkID0ge307XG4gICAgICBfZXJyb3JzKHt9KTtcbiAgICB9O1xuICAgIHRhcmdldC5lcnJvciA9IGtvLnB1cmVDb21wdXRlZCh7XG4gICAgICByZWFkOiB0YXJnZXQuZXJyb3JzLmdldCxcbiAgICAgIHdyaXRlOiB0YXJnZXQuZXJyb3JzLnNldFxuICAgIH0pO1xuICAgIHRhcmdldC5oYXNFcnJvciA9IGtvLnB1cmVDb21wdXRlZCh7XG4gICAgICByZWFkOiB0YXJnZXQuZXJyb3JzLmhhc1xuICAgIH0pO1xuICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgICBfZXJyb3JzKHt9KTtcbiAgICAgIGRlbGV0ZSB0YXJnZXQuZXJyb3I7XG4gICAgICBkZWxldGUgdGFyZ2V0LmVycm9ycztcbiAgICAgIGRlbGV0ZSB0YXJnZXQuaGFzRXJyb3I7XG4gICAgICBkZWxldGUgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGU7XG4gICAgfTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICBrby5leHRlbmRlcnMuZmFsbGlibGUuaXNGYWxsaWJsZSA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgIHJldHVybiAodGFyZ2V0LmVycm9ycyAhPSBudWxsKSAmJiAodGFyZ2V0LmVycm9yICE9IG51bGwpO1xuICB9O1xuICBnZXREZXBlbmRlbmNpZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlcEtleSwgc3ltU3RhdGU7XG4gICAgc3ltU3RhdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYywgaSwgbGVuLCByZWYsIHN5bWJvbDtcbiAgICAgIGMgPSBrby5jb21wdXRlZChmdW5jdGlvbigpIHt9KTtcbiAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICE9IG51bGwpIHtcbiAgICAgICAgcmVmID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhjKTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgc3ltYm9sID0gcmVmW2ldO1xuICAgICAgICAgIGlmIChTdHJpbmcoc3ltYm9sKSA9PT0gJ1N5bWJvbChfc3RhdGUpJykge1xuICAgICAgICAgICAgcmV0dXJuIHN5bWJvbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsICdfc3RhdGUnKSkge1xuICAgICAgICByZXR1cm4gJ19zdGF0ZSc7XG4gICAgICB9XG4gICAgfSkoKTtcbiAgICBkZXBLZXkgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYywga2V5LCBvLCByZWYsIHZhbDtcbiAgICAgIG8gPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgICBjID0ga28uY29tcHV0ZWQoe1xuICAgICAgICByZWFkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gbygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJlZiA9IGNbc3ltU3RhdGVdO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgIHZhbCA9IHJlZltrZXldO1xuICAgICAgICBpZiAoKHZhbCAhPSBudWxsKSAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSgpO1xuICAgIHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgIGlmIChrby5pc0NvbXB1dGVkKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtzeW1TdGF0ZV1bZGVwS2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpO1xuICBrby5leHRlbmRlcnMuZmFsbGlibGVSZWFkID0gZnVuY3Rpb24odGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgdmFyIGRpc3Bvc2FibGUsIGVycm9ycywgZmluZElubmVyO1xuICAgIGlmICgha28uaXNDb21wdXRlZCh0YXJnZXQpKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICB0YXJnZXQuZXh0ZW5kKHtcbiAgICAgIGZhbGxpYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICBpZiAodHlwZW9mIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlUmVhZCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlUmVhZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmaW5kSW5uZXIgPSBmdW5jdGlvbihvdXRwdXQsIGNvbXB1dGVkKSB7XG4gICAgICB2YXIgZGVwZW5kZW5jeSwga2V5LCByZWY7XG4gICAgICByZWYgPSBnZXREZXBlbmRlbmNpZXMoY29tcHV0ZWQpO1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgIGRlcGVuZGVuY3kgPSByZWZba2V5XTtcbiAgICAgICAgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY3kuX3RhcmdldDtcbiAgICAgICAgaWYgKGtvLmV4dGVuZGVycy5mYWxsaWJsZS5pc0ZhbGxpYmxlKGRlcGVuZGVuY3kpKSB7XG4gICAgICAgICAgaWYgKG91dHB1dC5pbmRleE9mKGRlcGVuZGVuY3kuZXJyb3JzKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGRlcGVuZGVuY3kuZXJyb3JzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtvLmlzQ29tcHV0ZWQoZGVwZW5kZW5jeSkpIHtcbiAgICAgICAgICBmaW5kSW5uZXIob3V0cHV0LCBkZXBlbmRlbmN5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuICAgIGVycm9ycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGZpbmRJbm5lcihbXSwgdGFyZ2V0KTtcbiAgICAgIH0gZmluYWxseSB7XG5cbiAgICAgIH1cbiAgICB9O1xuICAgIGRpc3Bvc2FibGUgPSB0YXJnZXQuZXJyb3JzLmFkZChlcnJvcnMpO1xuICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlUmVhZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGRpc3Bvc2FibGUgIT0gbnVsbCkge1xuICAgICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgZGlzcG9zYWJsZSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG4gIHJldHVybiBrbztcbn07XG5cbmFwcGx5S292KGtvKTtcblxyXG5yZXR1cm4ga287XHJcbn0pKTtcclxuIiwiYXBwbHlLb3YgPSAoa28pIC0+XHJcbiAga28udmFsaWRhdGVkID0ge31cclxuXHJcblxyXG4gIGNsYXNzIERpc3Bvc2FibGVcclxuICAgIGNvbnN0cnVjdG9yOiAoQG5hbWUsIEBtZXNzYWdlLCBAdGFyZ2V0LCBkaXNwb3NlLCBpc0Rpc3Bvc2VkKSAtPlxyXG4gICAgICBpZiBkaXNwb3NlP1xyXG4gICAgICAgIEBkaXNwb3NlID0gZGlzcG9zZVxyXG4gICAgICBpZiBpc0Rpc3Bvc2VkP1xyXG4gICAgICAgIEBpc0Rpc3Bvc2VkID0gaXNEaXNwb3NlZFxyXG5cclxuICAgIGRpc3Bvc2U6ICgpIC0+XHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGlzRGlzcG9zZWQ6ICgpIC0+XHJcbiAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gIF9pZENvdW50ZXIgPSAwXHJcbiAgZ2V0VW5pcXVlSWQgPSAoKSAtPlxyXG4gICAgKytfaWRDb3VudGVyXHJcblxyXG4gIGtvLmV4dGVuZGVycy5mYWxsaWJsZSA9ICh0YXJnZXQsIG9wdGlvbnMpIC0+XHJcbiAgICAjIERpc3Bvc2U/XHJcbiAgICBpZiBvcHRpb25zID09IGZhbHNlXHJcbiAgICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlPygpXHJcbiAgICAgIHJldHVybiB0YXJnZXRcclxuXHJcbiAgICAjIEFscmVhZHkgY29uc3RydWN0ZWRcclxuICAgIGlmIGtvLmV4dGVuZGVycy5mYWxsaWJsZS5pc0ZhbGxpYmxlKHRhcmdldClcclxuICAgICAgcmV0dXJuIHRhcmdldFxyXG5cclxuICAgICMgY29udGFpbnMgdGhlIGVycm9ycyBmb3IgdGFyZ2V0XHJcbiAgICBfZXJyb3JzID0ga28ub2JzZXJ2YWJsZSh7fSlcclxuICAgIF9uYW1lZCA9IHt9XHJcblxyXG4gICAgIyBoZWxwZXIgZm9yIGNhbGxpbmcgaGFzT3duUHJvcGVydHlcclxuICAgIF9oYXNPd25Qcm9wID0gKHt9KS5oYXNPd25Qcm9wZXJ0eVxyXG5cclxuICAgICMgUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVycm9yLCBpZiBpdCBleGlzdHNcclxuICAgIF9yZW1vdmVFcnJvciA9IChpZCwgdHJpZ2dlcikgLT5cclxuICAgICAgaWYgdHlwZW9mIGlkID09ICdzdHJpbmcnXHJcbiAgICAgICAgaWYge30uaGFzT3duUHJvcGVydHkoX25hbWVkLCBpZClcclxuICAgICAgICAgIG5hbWUgPSBpZFxyXG4gICAgICAgICAgaWQgPSBfbmFtZWRbaWRdXHJcbiAgICAgICAgICBkZWxldGUgX25hbWVkW25hbWVdXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgaWQgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgIGlmIGlkP1xyXG4gICAgICAgIGVycm9ycyA9IF9lcnJvcnMoKVxyXG5cclxuICAgICAgICBpZiBfaGFzT3duUHJvcC5jYWxsKGVycm9ycywgaWQpXHJcbiAgICAgICAgICBkZWxldGUgZXJyb3JzW2lkXVxyXG5cclxuICAgICAgICAgIGlmIHRyaWdnZXIgIT0gZmFsc2VcclxuICAgICAgICAgICAgX2Vycm9ycy52YWx1ZUhhc011dGF0ZWQoKVxyXG5cclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgIyBSZXR1cm5zIHRydWUgaWZmIHRoZSBzcGVjaWZpZWQgZXJyb3IgZXhpc3RzXHJcbiAgICBfZXJyb3JFeGlzdHMgPSAoaWQpIC0+XHJcbiAgICAgIF9oYXNPd25Qcm9wLmNhbGwoX2Vycm9ycygpLCBpZClcclxuXHJcbiAgICBfcmVnaXN0ZXJFcnJvciA9IChlcnJvcnMsIG1lc3NhZ2UsIG5hbWUsIHRyaWdnZXIpIC0+XHJcbiAgICAgIGlmIG1lc3NhZ2U/XHJcbiAgICAgICAgaWQgPSBnZXRVbmlxdWVJZCgpXHJcblxyXG4gICAgICAgIGRpc3Bvc2FibGUgPSBuZXcgRGlzcG9zYWJsZShcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBtZXNzYWdlXHJcbiAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICgpIC0+IF9yZW1vdmVFcnJvcihuYW1lID8gaWQpXHJcbiAgICAgICAgICAoKSAtPiBub3QgX2Vycm9yRXhpc3RzKGlkKVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgaWYgdHlwZW9mIG5hbWUgPT0gJ3N0cmluZydcclxuICAgICAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwoX25hbWVkLCBuYW1lKVxyXG4gICAgICAgICAgICBfcmVtb3ZlRXJyb3IoX25hbWVkW25hbWVdLCBmYWxzZSlcclxuXHJcbiAgICAgICAgICBfbmFtZWRbbmFtZV0gPSBpZFxyXG5cclxuICAgICAgICBlcnJvcnNbaWRdID0gbWVzc2FnZVxyXG5cclxuICAgICAgICBpZiB0cmlnZ2VyICE9IGZhbHNlXHJcbiAgICAgICAgICBfZXJyb3JzLnZhbHVlSGFzTXV0YXRlZCgpXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBkaXNwb3NhYmxlID0gbmV3IERpc3Bvc2FibGUoXHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgX3JlbW92ZUVycm9yKG5hbWUsIHRyaWdnZXIpXHJcblxyXG4gICAgICByZXR1cm4gZGlzcG9zYWJsZVxyXG5cclxuICAgICMgQSBsaXN0IG9mIGFsbCBlcnJvcnNcclxuICAgIHRhcmdldC5lcnJvcnMgPSBrby5wdXJlQ29tcHV0ZWQoe1xyXG4gICAgICByZWFkOiAoKSAtPlxyXG4gICAgICAgIG1lc3NhZ2VzID0gW11cclxuXHJcbiAgICAgICAgY29sbGVjdE1lc3NhZ2VzID0gKG1lc3NhZ2UpIC0+XHJcbiAgICAgICAgICBpZiBub3QgbWVzc2FnZT9cclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICBlbHNlIGlmIHR5cGVvZiBtZXNzYWdlID09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UoKVxyXG4gICAgICAgICAgICBjb2xsZWN0TWVzc2FnZXMobWVzc2FnZSlcclxuICAgICAgICAgIGVsc2UgaWYgQXJyYXkuaXNBcnJheShtZXNzYWdlKVxyXG4gICAgICAgICAgICBmb3Igc3ViTWVzc2FnZSBpbiBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgY29sbGVjdE1lc3NhZ2VzKHN1Yk1lc3NhZ2UpXHJcbiAgICAgICAgICBlbHNlIGlmIHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnIG9yIHR5cGVvZiBtZXNzYWdlID09ICdvYmplY3QnXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gobWVzc2FnZSlcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgY29uc29sZT8uYXNzZXJ0PyhmYWxzZSwgJ2ludmFsaWQgZXJyb3IgbWVzc2FnZScpXHJcblxyXG4gICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgIGZvciBvd24gaWQsIG1lc3NhZ2Ugb2YgX2Vycm9ycygpXHJcbiAgICAgICAgICBjb2xsZWN0TWVzc2FnZXMobWVzc2FnZSlcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzXHJcblxyXG4gICAgICB3cml0ZTogKG1lc3NhZ2VzKSAtPlxyXG4gICAgICAgIHRhcmdldC5lcnJvcnMuc2V0KG1lc3NhZ2VzKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfSlcclxuXHJcbiAgICAjIEFkZCBhbiBpbmRpdmlkdWFsIGVycm9yXHJcbiAgICB0YXJnZXQuZXJyb3JzLmFkZCA9IChuYW1lLCBtZXNzYWdlKSAtPlxyXG4gICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDFcclxuICAgICAgICBtZXNzYWdlID0gbmFtZVxyXG4gICAgICAgIG5hbWUgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgIHJldHVybiBfcmVnaXN0ZXJFcnJvcihfZXJyb3JzKCksIG1lc3NhZ2UsIG5hbWUsIHRydWUpXHJcblxyXG4gICAgIyBTZXQgYSBzaW5nbGUgZXJyb3IsIGNsZWFyaW5nIG90aGVyIGVycm9yc1xyXG4gICAgdGFyZ2V0LmVycm9ycy5zZXQgPSAobmFtZSwgbWVzc2FnZSkgLT5cclxuICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAxXHJcbiAgICAgICAgbWVzc2FnZSA9IG5hbWVcclxuICAgICAgICBuYW1lID0gdW5kZWZpbmVkXHJcblxyXG4gICAgICBlcnJvcnMgPSB7fVxyXG4gICAgICBfbmFtZWQgPSB7fVxyXG4gICAgICBkaXNwb3NhYmxlID0gX3JlZ2lzdGVyRXJyb3IoZXJyb3JzLCBtZXNzYWdlLCBuYW1lLCBmYWxzZSlcclxuICAgICAgX2Vycm9ycyhlcnJvcnMpXHJcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlXHJcblxyXG4gICAgIyBHZXQgdGhlIGZpcnN0IGVycm9yXHJcbiAgICB0YXJnZXQuZXJyb3JzLmdldCA9IChuYW1lKSAtPlxyXG4gICAgICBmaXJzdE1lc3NhZ2UgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgIGZpbmRNZXNzYWdlID0gKG1lc3NhZ2UpIC0+XHJcbiAgICAgICAgaWYgbm90IG1lc3NhZ2U/XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICBlbHNlIGlmIHR5cGVvZiBtZXNzYWdlID09ICdmdW5jdGlvbidcclxuICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlKClcclxuICAgICAgICAgIGlmIGZpbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgZWxzZSBpZiBBcnJheS5pc0FycmF5KG1lc3NhZ2UpXHJcbiAgICAgICAgICBmb3Igc3ViTWVzc2FnZSBpbiBtZXNzYWdlXHJcbiAgICAgICAgICAgIGlmIGZpbmRNZXNzYWdlKHN1Yk1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICBlbHNlIGlmIHR5cGVvZiBtZXNzYWdlID09ICdzdHJpbmcnIG9yIHR5cGVvZiBtZXNzYWdlID09ICdvYmplY3QnXHJcbiAgICAgICAgICBmaXJzdE1lc3NhZ2UgPSBtZXNzYWdlXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgIGNvbnNvbGU/LmFzc2VydD8oZmFsc2UsICdpbnZhbGlkIGVycm9yIG1lc3NhZ2UnKVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgIGlmIHR5cGVvZiBuYW1lID09ICdzdHJpbmcnXHJcbiAgICAgICAgaWYge30uaGFzT3duUHJvcGVydHkuY2FsbChfbmFtZWQsIG5hbWUpXHJcbiAgICAgICAgICBpZiBmaW5kTWVzc2FnZShfZXJyb3JzKClbX25hbWVkW25hbWVdXSlcclxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0TWVzc2FnZVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZm9yIG93biBpZCwgbWVzc2FnZSBvZiBfZXJyb3JzKClcclxuICAgICAgICAgIGlmIGZpbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIHJldHVybiBmaXJzdE1lc3NhZ2VcclxuXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuXHJcbiAgICB0YXJnZXQuZXJyb3JzLmhhcyA9IChuYW1lKSAtPlxyXG4gICAgICByZXR1cm4gdGFyZ2V0LmVycm9ycy5nZXQobmFtZSk/XHJcblxyXG4gICAgdGFyZ2V0LmVycm9ycy5yZW1vdmUgPSAobmFtZSkgLT5cclxuICAgICAgaWYgdHlwZW9mIG5hbWUgPT0gJ3N0cmluZydcclxuICAgICAgICBfcmVtb3ZlRXJyb3IobmFtZSlcclxuXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgICMgQ2xlYXIgYWxsIHRoZSBjdXJyZW50IGVycm9yc1xyXG4gICAgdGFyZ2V0LmVycm9ycy5jbGVhciA9ICgpIC0+XHJcbiAgICAgIF9uYW1lZCA9IHt9XHJcbiAgICAgIF9lcnJvcnMoe30pXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgICMgR2V0IHRoZSBmaXJzdCBlcnJvciwgb3IgU2V0IGEgc2luZ2xlIGVycm9yIHdoaWxzdCBjbGVhcmluZyBvdGhlciBlcnJvcnNcclxuICAgIHRhcmdldC5lcnJvciA9IGtvLnB1cmVDb21wdXRlZCh7XHJcbiAgICAgIHJlYWQ6IHRhcmdldC5lcnJvcnMuZ2V0XHJcbiAgICAgIHdyaXRlOiB0YXJnZXQuZXJyb3JzLnNldFxyXG4gICAgfSlcclxuXHJcbiAgICAjIFJldHVybiB0cnVlIGlmZiB0aGVyZSBhcmUgYW55IGVycm9yc1xyXG4gICAgdGFyZ2V0Lmhhc0Vycm9yID0ga28ucHVyZUNvbXB1dGVkKHtcclxuICAgICAgcmVhZDogdGFyZ2V0LmVycm9ycy5oYXNcclxuICAgIH0pXHJcblxyXG4gICAgIyBSZW1vdmUgZmFsbGlibGUgZGF0YSBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0XHJcbiAgICB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZSA9ICgpIC0+XHJcbiAgICAgIF9lcnJvcnMoe30pXHJcbiAgICAgIGRlbGV0ZSB0YXJnZXQuZXJyb3JcclxuICAgICAgZGVsZXRlIHRhcmdldC5lcnJvcnNcclxuICAgICAgZGVsZXRlIHRhcmdldC5oYXNFcnJvclxyXG4gICAgICBkZWxldGUgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGVcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgcmV0dXJuIHRhcmdldFxyXG5cclxuICAjIERldGVybWluZSBpZiBpdGVtIGlzIGZhbGxpYmxlXHJcbiAga28uZXh0ZW5kZXJzLmZhbGxpYmxlLmlzRmFsbGlibGUgPSAodGFyZ2V0KSAtPlxyXG4gICAgcmV0dXJuIHRhcmdldC5lcnJvcnM/IGFuZCB0YXJnZXQuZXJyb3I/XHJcblxyXG4gIGdldERlcGVuZGVuY2llcyA9IGRvIC0+XHJcbiAgICBzeW1TdGF0ZSA9IGRvIC0+XHJcbiAgICAgIGMgPSBrby5jb21wdXRlZCgoKSAtPiByZXR1cm4pXHJcbiAgICAgIGlmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/XHJcbiAgICAgICAgZm9yIHN5bWJvbCBpbiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGMpXHJcbiAgICAgICAgICBpZiBTdHJpbmcoc3ltYm9sKSA9PSAnU3ltYm9sKF9zdGF0ZSknXHJcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2xcclxuXHJcbiAgICAgIGlmIHt9Lmhhc093blByb3BlcnR5LmNhbGwoYywgJ19zdGF0ZScpXHJcbiAgICAgICAgcmV0dXJuICdfc3RhdGUnXHJcblxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBkZXBLZXkgPSBkbyAtPlxyXG4gICAgICBvID0ga28ub2JzZXJ2YWJsZSgpXHJcbiAgICAgIGMgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgICAgcmVhZDogKCkgLT4gbygpXHJcbiAgICAgIH0pXHJcbiAgICAgIGZvciBvd24ga2V5LCB2YWwgb2YgY1tzeW1TdGF0ZV1cclxuICAgICAgICBpZiB2YWw/IGFuZCB0eXBlb2YgdmFsID09ICdvYmplY3QnXHJcbiAgICAgICAgICByZXR1cm4ga2V5XHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIHJldHVybiAodGFyZ2V0KSAtPlxyXG4gICAgICBpZiBrby5pc0NvbXB1dGVkKHRhcmdldClcclxuICAgICAgICByZXR1cm4gdGFyZ2V0W3N5bVN0YXRlXVtkZXBLZXldXHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4ge31cclxuXHJcbiAga28uZXh0ZW5kZXJzLmZhbGxpYmxlUmVhZCA9ICh0YXJnZXQsIG9wdGlvbnMpIC0+XHJcbiAgICBpZiBub3Qga28uaXNDb21wdXRlZCh0YXJnZXQpXHJcbiAgICAgIHJldHVybiB0YXJnZXRcclxuXHJcbiAgICB0YXJnZXQuZXh0ZW5kKHsgZmFsbGlibGU6IHRydWUgfSlcclxuXHJcbiAgICBpZiBvcHRpb25zID09IGZhbHNlXHJcbiAgICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlUmVhZD8oKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBmaW5kSW5uZXIgPSAob3V0cHV0LCBjb21wdXRlZCkgLT5cclxuICAgICAgZm9yIG93biBrZXksIGRlcGVuZGVuY3kgb2YgZ2V0RGVwZW5kZW5jaWVzKGNvbXB1dGVkKVxyXG4gICAgICAgIGRlcGVuZGVuY3kgPSBkZXBlbmRlbmN5Ll90YXJnZXRcclxuICAgICAgICBpZiBrby5leHRlbmRlcnMuZmFsbGlibGUuaXNGYWxsaWJsZShkZXBlbmRlbmN5KVxyXG4gICAgICAgICAgaWYgb3V0cHV0LmluZGV4T2YoZGVwZW5kZW5jeS5lcnJvcnMpID09IC0xXHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGRlcGVuZGVuY3kuZXJyb3JzKVxyXG5cclxuICAgICAgICBpZiBrby5pc0NvbXB1dGVkKGRlcGVuZGVuY3kpXHJcbiAgICAgICAgICBmaW5kSW5uZXIob3V0cHV0LCBkZXBlbmRlbmN5KVxyXG5cclxuICAgICAgcmV0dXJuIG91dHB1dFxyXG5cclxuICAgIGVycm9ycyA9ICgpIC0+XHJcbiAgICAgIHRyeVxyXG4gICAgICAgICNzdWJzY3JpcHRpb24gPSB0YXJnZXQuc3Vic2NyaWJlKCgpIC0+IHJldHVybilcclxuICAgICAgICAjdGFyZ2V0KClcclxuICAgICAgICByZXR1cm4gZmluZElubmVyKFtdLCB0YXJnZXQpXHJcbiAgICAgIGZpbmFsbHlcclxuICAgICAgICAjc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKVxyXG5cclxuICAgIGRpc3Bvc2FibGUgPSB0YXJnZXQuZXJyb3JzLmFkZChlcnJvcnMpXHJcblxyXG4gICAgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGVSZWFkID0gKCkgLT5cclxuICAgICAgaWYgZGlzcG9zYWJsZT9cclxuICAgICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UoKVxyXG4gICAgICAgIGRpc3Bvc2FibGUgPSB1bmRlZmluZWRcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgcmV0dXJuIHRhcmdldFxyXG5cclxuXHJcbiAgcmV0dXJuIGtvXHJcblxyXG5hcHBseUtvdihrbylcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
