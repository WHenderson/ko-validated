!function(e,r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?module.exports=r():e.applyKov=r()}(this,function(){var e,r={}.hasOwnProperty;return e=function(e){var n,t,o,l;return e.validated={},n=function(){function e(e,r,n,t,o){this.name=e,this.message=r,this.target=n,null!=t&&(this.dispose=t),null!=o&&(this.isDisposed=o)}return e.prototype.dispose=function(){},e.prototype.isDisposed=function(){return!0},e}(),t=0,l=function(){return++t},e.extenders.fallible=function(t,o){var i,s,u,f,a,c;return o===!1?("function"==typeof t._disposeFallible&&t._disposeFallible(),t):e.extenders.fallible.isFallible(t)?t:(s=e.observable({}),f={},u={}.hasOwnProperty,c=function(e,r){var n,t;"string"==typeof e&&({}.hasOwnProperty(f,e)?(t=e,e=f[e],delete f[t]):e=void 0),null!=e&&(n=s(),u.call(n,e)&&(delete n[e],r!==!1&&s.valueHasMutated()))},i=function(e){return u.call(s(),e)},a=function(e,r,o,u){var a,d;return null!=r?(d=l(),a=new n(o,r,t,function(){return c(null!=o?o:d)},function(){return!i(d)}),"string"==typeof o&&({}.hasOwnProperty.call(f,o)&&c(f[o],!1),f[o]=d),e[d]=r,u!==!1&&s.valueHasMutated()):(a=new n(o,r,t),c(o,u)),a},t.errors=e.pureComputed({read:function(){var e,n,t,o,l;o=[],e=function(r){var n,t,l;if(null!=r)if("function"==typeof r)r=r(),e(r);else if(Array.isArray(r))for(n=0,t=r.length;t>n;n++)l=r[n],e(l);else"string"==typeof r||"object"==typeof r?o.push(r):"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")},l=s();for(n in l)r.call(l,n)&&(t=l[n],e(t));return o},write:function(e){t.errors.set(e)}}),t.errors.add=function(e,r){return 1===arguments.length&&(r=e,e=void 0),a(s(),r,e,!0)},t.errors.set=function(e,r){var n,t;return 1===arguments.length&&(r=e,e=void 0),t={},f={},n=a(t,r,e,!1),s(t),n},t.errors.get=function(e){var n,t,o,l,i;if(t=void 0,n=function(e){var r,o,l;if(null==e)return!1;if("function"==typeof e){if(e=e(),n(e))return!0}else if(Array.isArray(e)){for(r=0,o=e.length;o>r;r++)if(l=e[r],n(l))return!0}else{if("string"==typeof e||"object"==typeof e)return t=e,!0;"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")}return!1},"string"==typeof e){if({}.hasOwnProperty.call(f,e)&&n(s()[f[e]]))return t}else{i=s();for(o in i)if(r.call(i,o)&&(l=i[o],n(l)))return t}},t.errors.has=function(e){return null!=t.errors.get(e)},t.errors.remove=function(e){"string"==typeof e&&c(e)},t.errors.clear=function(){f={},s({})},t.error=e.pureComputed({read:t.errors.get,write:t.errors.set}),t.hasError=e.pureComputed({read:t.errors.has}),t._disposeFallible=function(){s({}),delete t.error,delete t.errors,delete t.hasError,delete t._disposeFallible},t)},e.extenders.fallible.isFallible=function(e){return null!=e.errors&&null!=e.error},o=function(){var n,t;return t=function(){var r,n,t,o,l;if(r=e.computed(function(){}),null!=Object.getOwnPropertySymbols)for(o=Object.getOwnPropertySymbols(r),n=0,t=o.length;t>n;n++)if(l=o[n],"Symbol(_state)"===String(l))return l;return{}.hasOwnProperty.call(r,"_state")?"_state":void 0}(),n=function(){var n,o,l,i,s;l=e.observable(),n=e.computed({read:function(){return l()}}),i=n[t];for(o in i)if(r.call(i,o)&&(s=i[o],null!=s&&"object"==typeof s))return o}(),function(r){return e.isComputed(r)?r[t][n]:{}}}(),e.extenders.fallibleRead=function(n,t){var l,i,s;return e.isComputed(n)?(n.extend({fallible:!0}),t===!1?void("function"==typeof n._disposeFallibleRead&&n._disposeFallibleRead()):(s=function(n,t){var l,i,u;u=o(t);for(i in u)r.call(u,i)&&(l=u[i],l=l._target,e.extenders.fallible.isFallible(l)&&-1===n.indexOf(l.errors)&&n.push(l.errors),e.isComputed(l)&&s(n,l));return n},i=function(){try{return s([],n)}finally{}},l=n.errors.add(i),n._disposeFallibleRead=function(){null!=l&&(l.dispose(),l=void 0)},n)):n},e}});