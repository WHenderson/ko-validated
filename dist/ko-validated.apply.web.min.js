!function(e,r){"function"==typeof define&&define.amd?define([],r):e.applyKov=r()}(this,function(){var e,r={}.hasOwnProperty;return e=function(e){var n,t,o,i;return e.validated={},n=function(){function e(e,r,n,t,o){this.name=e,this.message=r,this.target=n,null!=t&&(this.dispose=t),null!=o&&(this.isDisposed=o)}return e.prototype.dispose=function(){},e.prototype.isDisposed=function(){return!0},e}(),t=0,i=function(){return++t},e.extenders.fallible=function(t,o){var l,s,u,f,a,c;return o===!1?("function"==typeof t._disposeFallible&&t._disposeFallible(),t):e.extenders.fallible.isFallible(t)?t:(s=e.observable({}),f={},u={}.hasOwnProperty,c=function(e,r){var n,t;"string"==typeof e&&({}.hasOwnProperty(f,e)?(t=e,e=f[e],delete f[t]):e=void 0),null!=e&&(n=s(),u.call(n,e)&&(delete n[e],r!==!1&&s.valueHasMutated()))},l=function(e){return u.call(s(),e)},a=function(e,r,o,u){var a,d;return null!=r?(d=i(),a=new n(o,r,t,function(){return c(null!=o?o:d)},function(){return!l(d)}),"string"==typeof o&&({}.hasOwnProperty.call(f,o)&&c(f[o],!1),f[o]=d),e[d]=r,u!==!1&&s.valueHasMutated()):(a=new n(o,r,t),c(o,u)),a},t.errors=e.pureComputed({read:function(){var e,n,t,o,i;o=[],e=function(r){var n,t,i;if(null!=r)if("function"==typeof r)r=r(),e(r);else if(Array.isArray(r))for(n=0,t=r.length;t>n;n++)i=r[n],e(i);else"string"==typeof r||"object"==typeof r?o.push(r):"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")},i=s();for(n in i)r.call(i,n)&&(t=i[n],e(t));return o},write:function(e){t.errors.set(e)}}),t.errors.add=function(e,r){return 1===arguments.length&&(r=e,e=void 0),a(s(),r,e,!0)},t.errors.set=function(e,r){var n,t;return 1===arguments.length&&(r=e,e=void 0),t={},f={},n=a(t,r,e,!1),s(t),n},t.errors.get=function(e){var n,t,o,i,l;if(t=void 0,n=function(e){var r,o,i;if(null==e)return!1;if("function"==typeof e){if(e=e(),n(e))return!0}else if(Array.isArray(e)){for(r=0,o=e.length;o>r;r++)if(i=e[r],n(i))return!0}else{if("string"==typeof e||"object"==typeof e)return t=e,!0;"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(!1,"invalid error message")}return!1},"string"==typeof e){if({}.hasOwnProperty.call(f,e)&&n(s()[f[e]]))return t}else{l=s();for(o in l)if(r.call(l,o)&&(i=l[o],n(i)))return t}},t.errors.has=function(e){return null!=t.errors.get(e)},t.errors.remove=function(e){"string"==typeof e&&c(e)},t.errors.clear=function(){f={},s({})},t.error=e.pureComputed({read:t.errors.get,write:t.errors.set}),t.hasError=e.pureComputed({read:t.errors.has}),t._disposeFallible=function(){s({}),delete t.error,delete t.errors,delete t.hasError,delete t._disposeFallible},t)},e.extenders.fallible.isFallible=function(e){return null!=e.errors&&null!=e.error},o=function(){var n,t;return t=function(){var r,n,t,o,i;if(r=e.computed(function(){}),null!=Object.getOwnPropertySymbols)for(o=Object.getOwnPropertySymbols(r),n=0,t=o.length;t>n;n++)if(i=o[n],"Symbol(_state)"===String(i))return i;return{}.hasOwnProperty.call(r,"_state")?"_state":void 0}(),n=function(){var n,o,i,l,s;i=e.observable(),n=e.computed({read:function(){return i()}}),l=n[t];for(o in l)if(r.call(l,o)&&(s=l[o],null!=s&&"object"==typeof s))return o}(),function(r){return e.isComputed(r)?r[t][n]:{}}}(),e.extenders.fallibleRead=function(n,t){var i,l,s;return e.isComputed(n)?(n.extend({fallible:!0}),t===!1?void("function"==typeof n._disposeFallibleRead&&n._disposeFallibleRead()):(s=function(n,t){var i,l,u;u=o(t);for(l in u)r.call(u,l)&&(i=u[l],i=i._target,e.extenders.fallible.isFallible(i)&&-1===n.indexOf(i.errors)&&n.push(i.errors),e.isComputed(i)&&s(n,i));return n},l=function(){try{return s([],n)}finally{}},i=n.errors.add(l),n._disposeFallibleRead=function(){null!=i&&(i.dispose(),i=void 0)},n)):n},e}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtvLXZhbGlkYXRlZC5hcHBseS53ZWIuanMiLCJrby12YWxpZGF0ZWQuYXBwbHkuY29mZmVlIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiYXBwbHlLb3YiLCJ0aGlzIiwiaGFzUHJvcCIsImhhc093blByb3BlcnR5Iiwia28iLCJEaXNwb3NhYmxlIiwiX2lkQ291bnRlciIsImdldERlcGVuZGVuY2llcyIsImdldFVuaXF1ZUlkIiwidmFsaWRhdGVkIiwibmFtZTEiLCJtZXNzYWdlMSIsInRhcmdldDEiLCJkaXNwb3NlIiwiaXNEaXNwb3NlZCIsIm5hbWUiLCJtZXNzYWdlIiwidGFyZ2V0IiwicHJvdG90eXBlIiwiZXh0ZW5kZXJzIiwiZmFsbGlibGUiLCJvcHRpb25zIiwiX2Vycm9yRXhpc3RzIiwiX2Vycm9ycyIsIl9oYXNPd25Qcm9wIiwiX25hbWVkIiwiX3JlZ2lzdGVyRXJyb3IiLCJfcmVtb3ZlRXJyb3IiLCJfZGlzcG9zZUZhbGxpYmxlIiwiaXNGYWxsaWJsZSIsIm9ic2VydmFibGUiLCJpZCIsInRyaWdnZXIiLCJlcnJvcnMiLCJjYWxsIiwidmFsdWVIYXNNdXRhdGVkIiwiZGlzcG9zYWJsZSIsInB1cmVDb21wdXRlZCIsInJlYWQiLCJjb2xsZWN0TWVzc2FnZXMiLCJtZXNzYWdlcyIsInJlZiIsImkiLCJsZW4iLCJzdWJNZXNzYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwicHVzaCIsImNvbnNvbGUiLCJhc3NlcnQiLCJ3cml0ZSIsInNldCIsImFkZCIsImFyZ3VtZW50cyIsImdldCIsImZpbmRNZXNzYWdlIiwiZmlyc3RNZXNzYWdlIiwiaGFzIiwicmVtb3ZlIiwiY2xlYXIiLCJlcnJvciIsImhhc0Vycm9yIiwiZGVwS2V5Iiwic3ltU3RhdGUiLCJjIiwic3ltYm9sIiwiY29tcHV0ZWQiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJTdHJpbmciLCJrZXkiLCJvIiwidmFsIiwiaXNDb21wdXRlZCIsImZhbGxpYmxlUmVhZCIsImZpbmRJbm5lciIsImV4dGVuZCIsIl9kaXNwb3NlRmFsbGlibGVSZWFkIiwib3V0cHV0IiwiZGVwZW5kZW5jeSIsIl90YXJnZXQiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiQ0FBRSxTQUFTQSxFQUFNQyxHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFDekNELFVBQVdELEdBRVhELEVBQUtJLFNBQVdILEtBRWxCSSxLQUFNLFdBQ1IsR0FBSUQsR0NQSkUsS0FBQUMsY0Q2VUEsT0M3VUFILEdBQVcsU0FBQ0ksR0FDVixHQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxDQW1TQSxPQW5TQUosR0FBR0ssYUFHR0osRUFBQSxXQUNTLFFBQUFBLEdBQUNLLEVBQU9DLEVBQVVDLEVBQVNDLEVBQVNDLEdBQW5DYixLQUFDYyxLQUFETCxFQUFPVCxLQUFDZSxRQUFETCxFQUFVVixLQUFDZ0IsT0FBREwsRUFDMUIsTUFBQUMsSUFDRFosS0FBQ1ksUUFBVUEsR0FDVixNQUFBQyxJQUNEYixLQUFDYSxXQUFhQSxHRHVCbEIsTUFOQVQsR0FBV2EsVUNmWEwsUUFBUyxhRGlCVFIsRUFBV2EsVUNkWEosV0FBWSxXQUNWLE9BQU8sR0RpQkZULEtDZlRDLEVBQWEsRUFDYkUsRUFBYyxXRG1CWixRQ2xCRUYsR0FFSkYsRUFBR2UsVUFBVUMsU0FBVyxTQUFDSCxFQUFRSSxHQUUvQixHQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxDQUFBLE9BQUdOLE1BQVcsR0RtQjJCLGtCQUE1QkosR0FBT1csa0JDbEJsQlgsRUFBT1csbUJBQ0FYLEdBR05iLEVBQUdlLFVBQVVDLFNBQVNTLFdBQVdaLEdBQzNCQSxHQUdUTSxFQUFVbkIsRUFBRzBCLGVBQ2JMLEtBR0FELEtBQW1CckIsZUFHbkJ3QixFQUFlLFNBQUNJLEVBQUlDLEdBQ2xCLEdBQUFDLEdBQUFsQixDQUFnQixpQkFBTmdCLFFBQ0Y1QixlQUFlc0IsRUFBUU0sSUFDM0JoQixFQUFPZ0IsRUFDUEEsRUFBS04sRUFBT00s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R3NFLFdBQVdNLElBQ2ZKLEVBQVVHLEVBQVFDLEdBRXRCLE9BQU9ELElBRVQ5QyxFQUFTLFdBQ1AsSUFHRSxNQUFPMkMsTUFBYzNELEdBSHZCLFdBT0ZtQixFQUFhbkIsRUFBT2dCLE9BQU9vQixJQUFJcEIsR0FFL0JoQixFQUFPNkQscUJBQXVCLFdBQ3pCLE1BQUExQyxJQUNEQSxFQUFXdkIsVUFDWHVCLEVBQWEsU0FHVm5CLElBcENFQSxHQXVDSmIiLCJmaWxlIjoia28tdmFsaWRhdGVkLmFwcGx5LndlYi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByb290LmFwcGx5S292ID0gZmFjdG9yeSgpO1xyXG4gIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbnZhciBhcHBseUtvdixcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5hcHBseUtvdiA9IGZ1bmN0aW9uKGtvKSB7XG4gIHZhciBEaXNwb3NhYmxlLCBfaWRDb3VudGVyLCBnZXREZXBlbmRlbmNpZXMsIGdldFVuaXF1ZUlkO1xuICBrby52YWxpZGF0ZWQgPSB7fTtcbiAgRGlzcG9zYWJsZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBEaXNwb3NhYmxlKG5hbWUxLCBtZXNzYWdlMSwgdGFyZ2V0MSwgZGlzcG9zZSwgaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTE7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlMTtcbiAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0MTtcbiAgICAgIGlmIChkaXNwb3NlICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlID0gZGlzcG9zZTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0Rpc3Bvc2VkICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gaXNEaXNwb3NlZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKSB7fTtcblxuICAgIERpc3Bvc2FibGUucHJvdG90eXBlLmlzRGlzcG9zZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzcG9zYWJsZTtcblxuICB9KSgpO1xuICBfaWRDb3VudGVyID0gMDtcbiAgZ2V0VW5pcXVlSWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKytfaWRDb3VudGVyO1xuICB9O1xuICBrby5leHRlbmRlcnMuZmFsbGlibGUgPSBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgX2Vycm9yRXhpc3RzLCBfZXJyb3JzLCBfaGFzT3duUHJvcCwgX25hbWVkLCBfcmVnaXN0ZXJFcnJvciwgX3JlbW92ZUVycm9yO1xuICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICBpZiAoa28uZXh0ZW5kZXJzLmZhbGxpYmxlLmlzRmFsbGlibGUodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgX2Vycm9ycyA9IGtvLm9ic2VydmFibGUoe30pO1xuICAgIF9uYW1lZCA9IHt9O1xuICAgIF9oYXNPd25Qcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG4gICAgX3JlbW92ZUVycm9yID0gZnVuY3Rpb24oaWQsIHRyaWdnZXIpIHtcbiAgICAgIHZhciBlcnJvcnMsIG5hbWU7XG4gICAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkoX25hbWVkLCBpZCkpIHtcbiAgICAgICAgICBuYW1lID0gaWQ7XG4gICAgICAgICAgaWQgPSBfbmFtZWRbaWRdO1xuICAgICAgICAgIGRlbGV0ZSBfbmFtZWRbbmFtZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWQgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGVycm9ycyA9IF9lcnJvcnMoKTtcbiAgICAgICAgaWYgKF9oYXNPd25Qcm9wLmNhbGwoZXJyb3JzLCBpZCkpIHtcbiAgICAgICAgICBkZWxldGUgZXJyb3JzW2lkXTtcbiAgICAgICAgICBpZiAodHJpZ2dlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIF9lcnJvcnMudmFsdWVIYXNNdXRhdGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBfZXJyb3JFeGlzdHMgPSBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIF9oYXNPd25Qcm9wLmNhbGwoX2Vycm9ycygpLCBpZCk7XG4gICAgfTtcbiAgICBfcmVnaXN0ZXJFcnJvciA9IGZ1bmN0aW9uKGVycm9ycywgbWVzc2FnZSwgbmFtZSwgdHJpZ2dlcikge1xuICAgICAgdmFyIGRpc3Bvc2FibGUsIGlkO1xuICAgICAgaWYgKG1lc3NhZ2UgIT0gbnVsbCkge1xuICAgICAgICBpZCA9IGdldFVuaXF1ZUlkKCk7XG4gICAgICAgIGRpc3Bvc2FibGUgPSBuZXcgRGlzcG9zYWJsZShuYW1lLCBtZXNzYWdlLCB0YXJnZXQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBfcmVtb3ZlRXJyb3IobmFtZSAhPSBudWxsID8gbmFtZSA6IGlkKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuICFfZXJyb3JFeGlzdHMoaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9uYW1lZCwgbmFtZSkpIHtcbiAgICAgICAgICAgIF9yZW1vdmVFcnJvcihfbmFtZWRbbmFtZV0sIGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX25hbWVkW25hbWVdID0gaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3JzW2lkXSA9IG1lc3NhZ2U7XG4gICAgICAgIGlmICh0cmlnZ2VyICE9PSBmYWxzZSkge1xuICAgICAgICAgIF9lcnJvcnMudmFsdWVIYXNNdXRhdGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3Bvc2FibGUgPSBuZXcgRGlzcG9zYWJsZShuYW1lLCBtZXNzYWdlLCB0YXJnZXQpO1xuICAgICAgICBfcmVtb3ZlRXJyb3IobmFtZSwgdHJpZ2dlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICB9O1xuICAgIHRhcmdldC5lcnJvcnMgPSBrby5wdXJlQ29tcHV0ZWQoe1xuICAgICAgcmVhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb2xsZWN0TWVzc2FnZXMsIGlkLCBtZXNzYWdlLCBtZXNzYWdlcywgcmVmO1xuICAgICAgICBtZXNzYWdlcyA9IFtdO1xuICAgICAgICBjb2xsZWN0TWVzc2FnZXMgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICAgICAgdmFyIGksIGxlbiwgc3ViTWVzc2FnZTtcbiAgICAgICAgICBpZiAobWVzc2FnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UoKTtcbiAgICAgICAgICAgIGNvbGxlY3RNZXNzYWdlcyhtZXNzYWdlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IG1lc3NhZ2UubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgc3ViTWVzc2FnZSA9IG1lc3NhZ2VbaV07XG4gICAgICAgICAgICAgIGNvbGxlY3RNZXNzYWdlcyhzdWJNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbWVzc2FnZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5hc3NlcnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGZhbHNlLCAnaW52YWxpZCBlcnJvciBtZXNzYWdlJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlZiA9IF9lcnJvcnMoKTtcbiAgICAgICAgZm9yIChpZCBpbiByZWYpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGlkKSkgY29udGludWU7XG4gICAgICAgICAgbWVzc2FnZSA9IHJlZltpZF07XG4gICAgICAgICAgY29sbGVjdE1lc3NhZ2VzKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICAgIH0sXG4gICAgICB3cml0ZTogZnVuY3Rpb24obWVzc2FnZXMpIHtcbiAgICAgICAgdGFyZ2V0LmVycm9ycy5zZXQobWVzc2FnZXMpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRhcmdldC5lcnJvcnMuYWRkID0gZnVuY3Rpb24obmFtZSwgbWVzc2FnZSkge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgbWVzc2FnZSA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3JlZ2lzdGVyRXJyb3IoX2Vycm9ycygpLCBtZXNzYWdlLCBuYW1lLCB0cnVlKTtcbiAgICB9O1xuICAgIHRhcmdldC5lcnJvcnMuc2V0ID0gZnVuY3Rpb24obmFtZSwgbWVzc2FnZSkge1xuICAgICAgdmFyIGRpc3Bvc2FibGUsIGVycm9ycztcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBuYW1lO1xuICAgICAgICBuYW1lID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZXJyb3JzID0ge307XG4gICAgICBfbmFtZWQgPSB7fTtcbiAgICAgIGRpc3Bvc2FibGUgPSBfcmVnaXN0ZXJFcnJvcihlcnJvcnMsIG1lc3NhZ2UsIG5hbWUsIGZhbHNlKTtcbiAgICAgIF9lcnJvcnMoZXJyb3JzKTtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlO1xuICAgIH07XG4gICAgdGFyZ2V0LmVycm9ycy5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgZmluZE1lc3NhZ2UsIGZpcnN0TWVzc2FnZSwgaWQsIG1lc3NhZ2UsIHJlZjtcbiAgICAgIGZpcnN0TWVzc2FnZSA9IHZvaWQgMDtcbiAgICAgIGZpbmRNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgICB2YXIgaSwgbGVuLCBzdWJNZXNzYWdlO1xuICAgICAgICBpZiAobWVzc2FnZSA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UoKTtcbiAgICAgICAgICBpZiAoZmluZE1lc3NhZ2UobWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1lc3NhZ2UpKSB7XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gbWVzc2FnZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgc3ViTWVzc2FnZSA9IG1lc3NhZ2VbaV07XG4gICAgICAgICAgICBpZiAoZmluZE1lc3NhZ2Uoc3ViTWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbWVzc2FnZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBmaXJzdE1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUuYXNzZXJ0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5hc3NlcnQoZmFsc2UsICdpbnZhbGlkIGVycm9yIG1lc3NhZ2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfTtcbiAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoX25hbWVkLCBuYW1lKSkge1xuICAgICAgICAgIGlmIChmaW5kTWVzc2FnZShfZXJyb3JzKClbX25hbWVkW25hbWVdXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdE1lc3NhZ2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWYgPSBfZXJyb3JzKCk7XG4gICAgICAgIGZvciAoaWQgaW4gcmVmKSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBpZCkpIGNvbnRpbnVlO1xuICAgICAgICAgIG1lc3NhZ2UgPSByZWZbaWRdO1xuICAgICAgICAgIGlmIChmaW5kTWVzc2FnZShtZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZpcnN0TWVzc2FnZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfTtcbiAgICB0YXJnZXQuZXJyb3JzLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHJldHVybiB0YXJnZXQuZXJyb3JzLmdldChuYW1lKSAhPSBudWxsO1xuICAgIH07XG4gICAgdGFyZ2V0LmVycm9ycy5yZW1vdmUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIF9yZW1vdmVFcnJvcihuYW1lKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRhcmdldC5lcnJvcnMuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIF9uYW1lZCA9IHt9O1xuICAgICAgX2Vycm9ycyh7fSk7XG4gICAgfTtcbiAgICB0YXJnZXQuZXJyb3IgPSBrby5wdXJlQ29tcHV0ZWQoe1xuICAgICAgcmVhZDogdGFyZ2V0LmVycm9ycy5nZXQsXG4gICAgICB3cml0ZTogdGFyZ2V0LmVycm9ycy5zZXRcbiAgICB9KTtcbiAgICB0YXJnZXQuaGFzRXJyb3IgPSBrby5wdXJlQ29tcHV0ZWQoe1xuICAgICAgcmVhZDogdGFyZ2V0LmVycm9ycy5oYXNcbiAgICB9KTtcbiAgICB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgX2Vycm9ycyh7fSk7XG4gICAgICBkZWxldGUgdGFyZ2V0LmVycm9yO1xuICAgICAgZGVsZXRlIHRhcmdldC5lcnJvcnM7XG4gICAgICBkZWxldGUgdGFyZ2V0Lmhhc0Vycm9yO1xuICAgICAgZGVsZXRlIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlO1xuICAgIH07XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAga28uZXh0ZW5kZXJzLmZhbGxpYmxlLmlzRmFsbGlibGUgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICByZXR1cm4gKHRhcmdldC5lcnJvcnMgIT0gbnVsbCkgJiYgKHRhcmdldC5lcnJvciAhPSBudWxsKTtcbiAgfTtcbiAgZ2V0RGVwZW5kZW5jaWVzID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZXBLZXksIHN5bVN0YXRlO1xuICAgIHN5bVN0YXRlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMsIGksIGxlbiwgcmVmLCBzeW1ib2w7XG4gICAgICBjID0ga28uY29tcHV0ZWQoZnVuY3Rpb24oKSB7fSk7XG4gICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyAhPSBudWxsKSB7XG4gICAgICAgIHJlZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoYyk7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHN5bWJvbCA9IHJlZltpXTtcbiAgICAgICAgICBpZiAoU3RyaW5nKHN5bWJvbCkgPT09ICdTeW1ib2woX3N0YXRlKScpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2w7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChjLCAnX3N0YXRlJykpIHtcbiAgICAgICAgcmV0dXJuICdfc3RhdGUnO1xuICAgICAgfVxuICAgIH0pKCk7XG4gICAgZGVwS2V5ID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGMsIGtleSwgbywgcmVmLCB2YWw7XG4gICAgICBvID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgICAgYyA9IGtvLmNvbXB1dGVkKHtcbiAgICAgICAgcmVhZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIG8oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZWYgPSBjW3N5bVN0YXRlXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWwgPSByZWZba2V5XTtcbiAgICAgICAgaWYgKCh2YWwgIT0gbnVsbCkgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkoKTtcbiAgICByZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICBpZiAoa28uaXNDb21wdXRlZCh0YXJnZXQpKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRbc3ltU3RhdGVdW2RlcEtleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgfTtcbiAgfSkoKTtcbiAga28uZXh0ZW5kZXJzLmZhbGxpYmxlUmVhZCA9IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHZhciBkaXNwb3NhYmxlLCBlcnJvcnMsIGZpbmRJbm5lcjtcbiAgICBpZiAoIWtvLmlzQ29tcHV0ZWQodGFyZ2V0KSkge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgdGFyZ2V0LmV4dGVuZCh7XG4gICAgICBmYWxsaWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgaWYgKHR5cGVvZiB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZVJlYWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZVJlYWQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZmluZElubmVyID0gZnVuY3Rpb24ob3V0cHV0LCBjb21wdXRlZCkge1xuICAgICAgdmFyIGRlcGVuZGVuY3ksIGtleSwgcmVmO1xuICAgICAgcmVmID0gZ2V0RGVwZW5kZW5jaWVzKGNvbXB1dGVkKTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICBkZXBlbmRlbmN5ID0gcmVmW2tleV07XG4gICAgICAgIGRlcGVuZGVuY3kgPSBkZXBlbmRlbmN5Ll90YXJnZXQ7XG4gICAgICAgIGlmIChrby5leHRlbmRlcnMuZmFsbGlibGUuaXNGYWxsaWJsZShkZXBlbmRlbmN5KSkge1xuICAgICAgICAgIGlmIChvdXRwdXQuaW5kZXhPZihkZXBlbmRlbmN5LmVycm9ycykgPT09IC0xKSB7XG4gICAgICAgICAgICBvdXRwdXQucHVzaChkZXBlbmRlbmN5LmVycm9ycyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChrby5pc0NvbXB1dGVkKGRlcGVuZGVuY3kpKSB7XG4gICAgICAgICAgZmluZElubmVyKG91dHB1dCwgZGVwZW5kZW5jeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbiAgICBlcnJvcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmaW5kSW5uZXIoW10sIHRhcmdldCk7XG4gICAgICB9IGZpbmFsbHkge1xuXG4gICAgICB9XG4gICAgfTtcbiAgICBkaXNwb3NhYmxlID0gdGFyZ2V0LmVycm9ycy5hZGQoZXJyb3JzKTtcbiAgICB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZVJlYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChkaXNwb3NhYmxlICE9IG51bGwpIHtcbiAgICAgICAgZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIGRpc3Bvc2FibGUgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuICByZXR1cm4ga287XG59O1xuXHJcbnJldHVybiBhcHBseUtvdjtcclxufSkpO1xyXG4iLCJhcHBseUtvdiA9IChrbykgLT5cclxuICBrby52YWxpZGF0ZWQgPSB7fVxyXG5cclxuXHJcbiAgY2xhc3MgRGlzcG9zYWJsZVxyXG4gICAgY29uc3RydWN0b3I6IChAbmFtZSwgQG1lc3NhZ2UsIEB0YXJnZXQsIGRpc3Bvc2UsIGlzRGlzcG9zZWQpIC0+XHJcbiAgICAgIGlmIGRpc3Bvc2U/XHJcbiAgICAgICAgQGRpc3Bvc2UgPSBkaXNwb3NlXHJcbiAgICAgIGlmIGlzRGlzcG9zZWQ/XHJcbiAgICAgICAgQGlzRGlzcG9zZWQgPSBpc0Rpc3Bvc2VkXHJcblxyXG4gICAgZGlzcG9zZTogKCkgLT5cclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgaXNEaXNwb3NlZDogKCkgLT5cclxuICAgICAgcmV0dXJuIHRydWVcclxuXHJcbiAgX2lkQ291bnRlciA9IDBcclxuICBnZXRVbmlxdWVJZCA9ICgpIC0+XHJcbiAgICArK19pZENvdW50ZXJcclxuXHJcbiAga28uZXh0ZW5kZXJzLmZhbGxpYmxlID0gKHRhcmdldCwgb3B0aW9ucykgLT5cclxuICAgICMgRGlzcG9zZT9cclxuICAgIGlmIG9wdGlvbnMgPT0gZmFsc2VcclxuICAgICAgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGU/KClcclxuICAgICAgcmV0dXJuIHRhcmdldFxyXG5cclxuICAgICMgQWxyZWFkeSBjb25zdHJ1Y3RlZFxyXG4gICAgaWYga28uZXh0ZW5kZXJzLmZhbGxpYmxlLmlzRmFsbGlibGUodGFyZ2V0KVxyXG4gICAgICByZXR1cm4gdGFyZ2V0XHJcblxyXG4gICAgIyBjb250YWlucyB0aGUgZXJyb3JzIGZvciB0YXJnZXRcclxuICAgIF9lcnJvcnMgPSBrby5vYnNlcnZhYmxlKHt9KVxyXG4gICAgX25hbWVkID0ge31cclxuXHJcbiAgICAjIGhlbHBlciBmb3IgY2FsbGluZyBoYXNPd25Qcm9wZXJ0eVxyXG4gICAgX2hhc093blByb3AgPSAoe30pLmhhc093blByb3BlcnR5XHJcblxyXG4gICAgIyBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZXJyb3IsIGlmIGl0IGV4aXN0c1xyXG4gICAgX3JlbW92ZUVycm9yID0gKGlkLCB0cmlnZ2VyKSAtPlxyXG4gICAgICBpZiB0eXBlb2YgaWQgPT0gJ3N0cmluZydcclxuICAgICAgICBpZiB7fS5oYXNPd25Qcm9wZXJ0eShfbmFtZWQsIGlkKVxyXG4gICAgICAgICAgbmFtZSA9IGlkXHJcbiAgICAgICAgICBpZCA9IF9uYW1lZFtpZF1cclxuICAgICAgICAgIGRlbGV0ZSBfbmFtZWRbbmFtZV1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBpZCA9IHVuZGVmaW5lZFxyXG5cclxuICAgICAgaWYgaWQ/XHJcbiAgICAgICAgZXJyb3JzID0gX2Vycm9ycygpXHJcblxyXG4gICAgICAgIGlmIF9oYXNPd25Qcm9wLmNhbGwoZXJyb3JzLCBpZClcclxuICAgICAgICAgIGRlbGV0ZSBlcnJvcnNbaWRdXHJcblxyXG4gICAgICAgICAgaWYgdHJpZ2dlciAhPSBmYWxzZVxyXG4gICAgICAgICAgICBfZXJyb3JzLnZhbHVlSGFzTXV0YXRlZCgpXHJcblxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICAjIFJldHVybnMgdHJ1ZSBpZmYgdGhlIHNwZWNpZmllZCBlcnJvciBleGlzdHNcclxuICAgIF9lcnJvckV4aXN0cyA9IChpZCkgLT5cclxuICAgICAgX2hhc093blByb3AuY2FsbChfZXJyb3JzKCksIGlkKVxyXG5cclxuICAgIF9yZWdpc3RlckVycm9yID0gKGVycm9ycywgbWVzc2FnZSwgbmFtZSwgdHJpZ2dlcikgLT5cclxuICAgICAgaWYgbWVzc2FnZT9cclxuICAgICAgICBpZCA9IGdldFVuaXF1ZUlkKClcclxuXHJcbiAgICAgICAgZGlzcG9zYWJsZSA9IG5ldyBEaXNwb3NhYmxlKFxyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIG1lc3NhZ2VcclxuICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgKCkgLT4gX3JlbW92ZUVycm9yKG5hbWUgPyBpZClcclxuICAgICAgICAgICgpIC0+IG5vdCBfZXJyb3JFeGlzdHMoaWQpXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBpZiB0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgaWYge30uaGFzT3duUHJvcGVydHkuY2FsbChfbmFtZWQsIG5hbWUpXHJcbiAgICAgICAgICAgIF9yZW1vdmVFcnJvcihfbmFtZWRbbmFtZV0sIGZhbHNlKVxyXG5cclxuICAgICAgICAgIF9uYW1lZFtuYW1lXSA9IGlkXHJcblxyXG4gICAgICAgIGVycm9yc1tpZF0gPSBtZXNzYWdlXHJcblxyXG4gICAgICAgIGlmIHRyaWdnZXIgIT0gZmFsc2VcclxuICAgICAgICAgIF9lcnJvcnMudmFsdWVIYXNNdXRhdGVkKClcclxuICAgICAgZWxzZVxyXG4gICAgICAgIGRpc3Bvc2FibGUgPSBuZXcgRGlzcG9zYWJsZShcclxuICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBfcmVtb3ZlRXJyb3IobmFtZSwgdHJpZ2dlcilcclxuXHJcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlXHJcblxyXG4gICAgIyBBIGxpc3Qgb2YgYWxsIGVycm9yc1xyXG4gICAgdGFyZ2V0LmVycm9ycyA9IGtvLnB1cmVDb21wdXRlZCh7XHJcbiAgICAgIHJlYWQ6ICgpIC0+XHJcbiAgICAgICAgbWVzc2FnZXMgPSBbXVxyXG5cclxuICAgICAgICBjb2xsZWN0TWVzc2FnZXMgPSAobWVzc2FnZSkgLT5cclxuICAgICAgICAgIGlmIG5vdCBtZXNzYWdlP1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgIGVsc2UgaWYgdHlwZW9mIG1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSgpXHJcbiAgICAgICAgICAgIGNvbGxlY3RNZXNzYWdlcyhtZXNzYWdlKVxyXG4gICAgICAgICAgZWxzZSBpZiBBcnJheS5pc0FycmF5KG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIGZvciBzdWJNZXNzYWdlIGluIG1lc3NhZ2VcclxuICAgICAgICAgICAgICBjb2xsZWN0TWVzc2FnZXMoc3ViTWVzc2FnZSlcclxuICAgICAgICAgIGVsc2UgaWYgdHlwZW9mIG1lc3NhZ2UgPT0gJ3N0cmluZycgb3IgdHlwZW9mIG1lc3NhZ2UgPT0gJ29iamVjdCdcclxuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKVxyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBjb25zb2xlPy5hc3NlcnQ/KGZhbHNlLCAnaW52YWxpZCBlcnJvciBtZXNzYWdlJylcclxuXHJcbiAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgZm9yIG93biBpZCwgbWVzc2FnZSBvZiBfZXJyb3JzKClcclxuICAgICAgICAgIGNvbGxlY3RNZXNzYWdlcyhtZXNzYWdlKVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXNcclxuXHJcbiAgICAgIHdyaXRlOiAobWVzc2FnZXMpIC0+XHJcbiAgICAgICAgdGFyZ2V0LmVycm9ycy5zZXQobWVzc2FnZXMpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9KVxyXG5cclxuICAgICMgQWRkIGFuIGluZGl2aWR1YWwgZXJyb3JcclxuICAgIHRhcmdldC5lcnJvcnMuYWRkID0gKG5hbWUsIG1lc3NhZ2UpIC0+XHJcbiAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMVxyXG4gICAgICAgIG1lc3NhZ2UgPSBuYW1lXHJcbiAgICAgICAgbmFtZSA9IHVuZGVmaW5lZFxyXG5cclxuICAgICAgcmV0dXJuIF9yZWdpc3RlckVycm9yKF9lcnJvcnMoKSwgbWVzc2FnZSwgbmFtZSwgdHJ1ZSlcclxuXHJcbiAgICAjIFNldCBhIHNpbmdsZSBlcnJvciwgY2xlYXJpbmcgb3RoZXIgZXJyb3JzXHJcbiAgICB0YXJnZXQuZXJyb3JzLnNldCA9IChuYW1lLCBtZXNzYWdlKSAtPlxyXG4gICAgICBpZiBhcmd1bWVudHMubGVuZ3RoID09IDFcclxuICAgICAgICBtZXNzYWdlID0gbmFtZVxyXG4gICAgICAgIG5hbWUgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgIGVycm9ycyA9IHt9XHJcbiAgICAgIF9uYW1lZCA9IHt9XHJcbiAgICAgIGRpc3Bvc2FibGUgPSBfcmVnaXN0ZXJFcnJvcihlcnJvcnMsIG1lc3NhZ2UsIG5hbWUsIGZhbHNlKVxyXG4gICAgICBfZXJyb3JzKGVycm9ycylcclxuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVcclxuXHJcbiAgICAjIEdldCB0aGUgZmlyc3QgZXJyb3JcclxuICAgIHRhcmdldC5lcnJvcnMuZ2V0ID0gKG5hbWUpIC0+XHJcbiAgICAgIGZpcnN0TWVzc2FnZSA9IHVuZGVmaW5lZFxyXG5cclxuICAgICAgZmluZE1lc3NhZ2UgPSAobWVzc2FnZSkgLT5cclxuICAgICAgICBpZiBub3QgbWVzc2FnZT9cclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIG1lc3NhZ2UgPT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2UoKVxyXG4gICAgICAgICAgaWYgZmluZE1lc3NhZ2UobWVzc2FnZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICBlbHNlIGlmIEFycmF5LmlzQXJyYXkobWVzc2FnZSlcclxuICAgICAgICAgIGZvciBzdWJNZXNzYWdlIGluIG1lc3NhZ2VcclxuICAgICAgICAgICAgaWYgZmluZE1lc3NhZ2Uoc3ViTWVzc2FnZSlcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIGVsc2UgaWYgdHlwZW9mIG1lc3NhZ2UgPT0gJ3N0cmluZycgb3IgdHlwZW9mIG1lc3NhZ2UgPT0gJ29iamVjdCdcclxuICAgICAgICAgIGZpcnN0TWVzc2FnZSA9IG1lc3NhZ2VcclxuICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgY29uc29sZT8uYXNzZXJ0PyhmYWxzZSwgJ2ludmFsaWQgZXJyb3IgbWVzc2FnZScpXHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgaWYgdHlwZW9mIG5hbWUgPT0gJ3N0cmluZydcclxuICAgICAgICBpZiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKF9uYW1lZCwgbmFtZSlcclxuICAgICAgICAgIGlmIGZpbmRNZXNzYWdlKF9lcnJvcnMoKVtfbmFtZWRbbmFtZV1dKVxyXG4gICAgICAgICAgICByZXR1cm4gZmlyc3RNZXNzYWdlXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBmb3Igb3duIGlkLCBtZXNzYWdlIG9mIF9lcnJvcnMoKVxyXG4gICAgICAgICAgaWYgZmluZE1lc3NhZ2UobWVzc2FnZSlcclxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0TWVzc2FnZVxyXG5cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxyXG5cclxuICAgIHRhcmdldC5lcnJvcnMuaGFzID0gKG5hbWUpIC0+XHJcbiAgICAgIHJldHVybiB0YXJnZXQuZXJyb3JzLmdldChuYW1lKT9cclxuXHJcbiAgICB0YXJnZXQuZXJyb3JzLnJlbW92ZSA9IChuYW1lKSAtPlxyXG4gICAgICBpZiB0eXBlb2YgbmFtZSA9PSAnc3RyaW5nJ1xyXG4gICAgICAgIF9yZW1vdmVFcnJvcihuYW1lKVxyXG5cclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgIyBDbGVhciBhbGwgdGhlIGN1cnJlbnQgZXJyb3JzXHJcbiAgICB0YXJnZXQuZXJyb3JzLmNsZWFyID0gKCkgLT5cclxuICAgICAgX25hbWVkID0ge31cclxuICAgICAgX2Vycm9ycyh7fSlcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgIyBHZXQgdGhlIGZpcnN0IGVycm9yLCBvciBTZXQgYSBzaW5nbGUgZXJyb3Igd2hpbHN0IGNsZWFyaW5nIG90aGVyIGVycm9yc1xyXG4gICAgdGFyZ2V0LmVycm9yID0ga28ucHVyZUNvbXB1dGVkKHtcclxuICAgICAgcmVhZDogdGFyZ2V0LmVycm9ycy5nZXRcclxuICAgICAgd3JpdGU6IHRhcmdldC5lcnJvcnMuc2V0XHJcbiAgICB9KVxyXG5cclxuICAgICMgUmV0dXJuIHRydWUgaWZmIHRoZXJlIGFyZSBhbnkgZXJyb3JzXHJcbiAgICB0YXJnZXQuaGFzRXJyb3IgPSBrby5wdXJlQ29tcHV0ZWQoe1xyXG4gICAgICByZWFkOiB0YXJnZXQuZXJyb3JzLmhhc1xyXG4gICAgfSlcclxuXHJcbiAgICAjIFJlbW92ZSBmYWxsaWJsZSBkYXRhIGZyb20gdGhlIHRhcmdldCBvYmplY3RcclxuICAgIHRhcmdldC5fZGlzcG9zZUZhbGxpYmxlID0gKCkgLT5cclxuICAgICAgX2Vycm9ycyh7fSlcclxuICAgICAgZGVsZXRlIHRhcmdldC5lcnJvclxyXG4gICAgICBkZWxldGUgdGFyZ2V0LmVycm9yc1xyXG4gICAgICBkZWxldGUgdGFyZ2V0Lmhhc0Vycm9yXHJcbiAgICAgIGRlbGV0ZSB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICByZXR1cm4gdGFyZ2V0XHJcblxyXG4gICMgRGV0ZXJtaW5lIGlmIGl0ZW0gaXMgZmFsbGlibGVcclxuICBrby5leHRlbmRlcnMuZmFsbGlibGUuaXNGYWxsaWJsZSA9ICh0YXJnZXQpIC0+XHJcbiAgICByZXR1cm4gdGFyZ2V0LmVycm9ycz8gYW5kIHRhcmdldC5lcnJvcj9cclxuXHJcbiAgZ2V0RGVwZW5kZW5jaWVzID0gZG8gLT5cclxuICAgIHN5bVN0YXRlID0gZG8gLT5cclxuICAgICAgYyA9IGtvLmNvbXB1dGVkKCgpIC0+IHJldHVybilcclxuICAgICAgaWYgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scz9cclxuICAgICAgICBmb3Igc3ltYm9sIGluIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoYylcclxuICAgICAgICAgIGlmIFN0cmluZyhzeW1ib2wpID09ICdTeW1ib2woX3N0YXRlKSdcclxuICAgICAgICAgICAgcmV0dXJuIHN5bWJvbFxyXG5cclxuICAgICAgaWYge30uaGFzT3duUHJvcGVydHkuY2FsbChjLCAnX3N0YXRlJylcclxuICAgICAgICByZXR1cm4gJ19zdGF0ZSdcclxuXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGRlcEtleSA9IGRvIC0+XHJcbiAgICAgIG8gPSBrby5vYnNlcnZhYmxlKClcclxuICAgICAgYyA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgICByZWFkOiAoKSAtPiBvKClcclxuICAgICAgfSlcclxuICAgICAgZm9yIG93biBrZXksIHZhbCBvZiBjW3N5bVN0YXRlXVxyXG4gICAgICAgIGlmIHZhbD8gYW5kIHR5cGVvZiB2YWwgPT0gJ29iamVjdCdcclxuICAgICAgICAgIHJldHVybiBrZXlcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgcmV0dXJuICh0YXJnZXQpIC0+XHJcbiAgICAgIGlmIGtvLmlzQ29tcHV0ZWQodGFyZ2V0KVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRbc3ltU3RhdGVdW2RlcEtleV1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiB7fVxyXG5cclxuICBrby5leHRlbmRlcnMuZmFsbGlibGVSZWFkID0gKHRhcmdldCwgb3B0aW9ucykgLT5cclxuICAgIGlmIG5vdCBrby5pc0NvbXB1dGVkKHRhcmdldClcclxuICAgICAgcmV0dXJuIHRhcmdldFxyXG5cclxuICAgIHRhcmdldC5leHRlbmQoeyBmYWxsaWJsZTogdHJ1ZSB9KVxyXG5cclxuICAgIGlmIG9wdGlvbnMgPT0gZmFsc2VcclxuICAgICAgdGFyZ2V0Ll9kaXNwb3NlRmFsbGlibGVSZWFkPygpXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIGZpbmRJbm5lciA9IChvdXRwdXQsIGNvbXB1dGVkKSAtPlxyXG4gICAgICBmb3Igb3duIGtleSwgZGVwZW5kZW5jeSBvZiBnZXREZXBlbmRlbmNpZXMoY29tcHV0ZWQpXHJcbiAgICAgICAgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY3kuX3RhcmdldFxyXG4gICAgICAgIGlmIGtvLmV4dGVuZGVycy5mYWxsaWJsZS5pc0ZhbGxpYmxlKGRlcGVuZGVuY3kpXHJcbiAgICAgICAgICBpZiBvdXRwdXQuaW5kZXhPZihkZXBlbmRlbmN5LmVycm9ycykgPT0gLTFcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goZGVwZW5kZW5jeS5lcnJvcnMpXHJcblxyXG4gICAgICAgIGlmIGtvLmlzQ29tcHV0ZWQoZGVwZW5kZW5jeSlcclxuICAgICAgICAgIGZpbmRJbm5lcihvdXRwdXQsIGRlcGVuZGVuY3kpXHJcblxyXG4gICAgICByZXR1cm4gb3V0cHV0XHJcblxyXG4gICAgZXJyb3JzID0gKCkgLT5cclxuICAgICAgdHJ5XHJcbiAgICAgICAgI3N1YnNjcmlwdGlvbiA9IHRhcmdldC5zdWJzY3JpYmUoKCkgLT4gcmV0dXJuKVxyXG4gICAgICAgICN0YXJnZXQoKVxyXG4gICAgICAgIHJldHVybiBmaW5kSW5uZXIoW10sIHRhcmdldClcclxuICAgICAgZmluYWxseVxyXG4gICAgICAgICNzdWJzY3JpcHRpb24uZGlzcG9zZSgpXHJcblxyXG4gICAgZGlzcG9zYWJsZSA9IHRhcmdldC5lcnJvcnMuYWRkKGVycm9ycylcclxuXHJcbiAgICB0YXJnZXQuX2Rpc3Bvc2VGYWxsaWJsZVJlYWQgPSAoKSAtPlxyXG4gICAgICBpZiBkaXNwb3NhYmxlP1xyXG4gICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpXHJcbiAgICAgICAgZGlzcG9zYWJsZSA9IHVuZGVmaW5lZFxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICByZXR1cm4gdGFyZ2V0XHJcblxyXG5cclxuICByZXR1cm4ga29cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
